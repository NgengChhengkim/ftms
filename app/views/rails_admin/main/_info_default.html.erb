<% @model_config.show.with(object: @object, view: self, controller: self.controller).visible_groups.each do |fieldset| %>
  <% unless (fields = fieldset.with(object: @object, view: self, controller: self.controller).visible_fields).empty? %>
    <% if !(values = fields.map{ |f| f.formatted_value.presence }).compact.empty? || !RailsAdmin::config.compact_show_view %>
      <div class="fieldset">
        <h4>
          <%= fieldset.label %>
        </h4>
        <% if fieldset.help %>
          <p>
            <%= fieldset.help %>
          </p>
        <% end %>
        <dl>
          <% fields.each_with_index do |field, index| %>
            <% unless values[index].nil? && RailsAdmin::config.compact_show_view %>
              <dt>
                <span class="<%= field.type_css_class %> <%= field.css_class %> label label-info">
                  <%= field.label %>
                </span>
              </dt>
              <dd class="well">
                <%= field.pretty_value %>
              </dd>
            <% end %>
          <% end %>
        </dl>
      </div>
    <% end %>
  <% end %>
<% end %>
